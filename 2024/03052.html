<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="JVM学习, 十二の博客宇宙"><meta name="description" content="JVM学习
JVM的位置
  

JVM的体系结构
 

类加载器和双亲委派机制
作用：加载 Class 类 
 

虚拟机自带的加载器

启动类（根）加载器

扩展类加载器（Ext）

应用程序加载器 （APP）

加载器之间的层级关系："><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="referrer" content="no-referrer-when-downgrade"><title>JVM学习 | 十二の博客宇宙</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload='"all"!=media&&(media="all")'><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><link rel="stylesheet" href="/css/post.css"><link rel="stylesheet" type="text/css" href="/css/reward.css"><script src="/libs/jquery/jquery-3.6.0.min.js"></script><meta name="generator" content="Hexo 6.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="十二の博客宇宙" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><style type="text/css" lang="css">#loading-container{position:fixed;top:0;left:0;min-height:100vh;width:100vw;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#fff;text-align:center;-webkit-transition:opacity 1s ease;-moz-transition:opacity 1s ease;-o-transition:opacity 1s ease;transition:opacity 1s ease}.loading-image{width:120px;height:50px;transform:translate(-50%)}.loading-image div:nth-child(2){-webkit-animation:pacman-balls 1s linear 0s infinite;animation:pacman-balls 1s linear 0s infinite}.loading-image div:nth-child(3){-webkit-animation:pacman-balls 1s linear .33s infinite;animation:pacman-balls 1s linear .33s infinite}.loading-image div:nth-child(4){-webkit-animation:pacman-balls 1s linear .66s infinite;animation:pacman-balls 1s linear .66s infinite}.loading-image div:nth-child(5){-webkit-animation:pacman-balls 1s linear .99s infinite;animation:pacman-balls 1s linear .99s infinite}.loading-image div:first-of-type{width:0;height:0;border:25px solid #49b1f5;border-right-color:transparent;border-radius:25px;-webkit-animation:rotate_pacman_half_up .5s 0s infinite;animation:rotate_pacman_half_up .5s 0s infinite}.loading-image div:nth-child(2){width:0;height:0;border:25px solid #49b1f5;border-right-color:transparent;border-radius:25px;-webkit-animation:rotate_pacman_half_down .5s 0s infinite;animation:rotate_pacman_half_down .5s 0s infinite;margin-top:-50px}@-webkit-keyframes rotate_pacman_half_up{0%{transform:rotate(270deg)}50%{transform:rotate(1turn)}to{transform:rotate(270deg)}}@keyframes rotate_pacman_half_up{0%{transform:rotate(270deg)}50%{transform:rotate(1turn)}to{transform:rotate(270deg)}}@-webkit-keyframes rotate_pacman_half_down{0%{transform:rotate(90deg)}50%{transform:rotate(0)}to{transform:rotate(90deg)}}@keyframes rotate_pacman_half_down{0%{transform:rotate(90deg)}50%{transform:rotate(0)}to{transform:rotate(90deg)}}@-webkit-keyframes pacman-balls{75%{opacity:.7}to{transform:translate(-100px,-6.25px)}}@keyframes pacman-balls{75%{opacity:.7}to{transform:translate(-100px,-6.25px)}}.loading-image div:nth-child(3),.loading-image div:nth-child(4),.loading-image div:nth-child(5),.loading-image div:nth-child(6){background-color:#49b1f5;width:15px;height:15px;border-radius:100%;margin:2px;width:10px;height:10px;position:absolute;transform:translateY(-6.25px);top:25px;left:100px}.loading-text{margin-bottom:20vh;text-align:center;color:#2c3e50;font-size:2rem;box-sizing:border-box;padding:0 10px;text-shadow:0 2px 10px rgba(0,0,0,.2)}@media only screen and (max-width:500px){.loading-text{font-size:1.5rem}}.fadeout{opacity:0}@-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}@keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0)}}</style><script>setTimeout(function(){const e=document.getElementById("loading-container");e.className="fadeout",setTimeout(function(){e.style.display="none"},2500)},1e3)</script><body><div id="loading-container"><p class="loading-text">嘘~ 正在从服务器偷取页面 . . .</p><div class="loading-image"><div></div><div></div><div></div><div></div><div></div></div></div><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><div><img src="/medias/loading.gif" data-original="/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">十二の博客宇宙</span></div></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><span>统计</span> <i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/tags"><i class="fas fa-tags" style="margin-top:-20px;zoom:.6"></i> <span>标签</span></a></li><li><a href="/categories"><i class="fas fa-bookmark" style="margin-top:-20px;zoom:.6"></i> <span>分类</span></a></li><li><a href="/archives"><i class="fas fa-archive" style="margin-top:-20px;zoom:.6"></i> <span>归档</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-list" style="zoom:.6"></i> <span>娱乐</span> <i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/movies"><i class="fas fa-film" style="margin-top:-20px;zoom:.6"></i> <span>电影</span></a></li><li><a href="/books"><i class="fas fa-book" style="margin-top:-20px;zoom:.6"></i> <span>读书</span></a></li><li><a href="/games"><i class="fas fa-gamepad" style="margin-top:-20px;zoom:.6"></i> <span>游戏</span></a></li><li><a href="/bangumis"><i class="fas fa-film" style="margin-top:-20px;zoom:.6"></i> <span>番剧</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/artitalk" class="waves-effect waves-light"><i class="fas fa-comment" style="zoom:.6"></i> <span>说说</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li><li><a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式"><i id="sum-moon-icon" class="fas fa-sun" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/medias/loading.gif" data-original="/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">十二の博客宇宙</div><div class="logo-desc">许多时候，称谓并不重要，重要的是对方一直在那个位置上，从未被挪动。</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fas fa-fw fa-link"></i> 统计 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/tags" style="margin-left:75px"><i class="fa fas fa-tags" style="position:absolute;left:50px"></i> <span>标签</span></a></li><li><a href="/categories" style="margin-left:75px"><i class="fa fas fa-bookmark" style="position:absolute;left:50px"></i> <span>分类</span></a></li><li><a href="/archives" style="margin-left:75px"><i class="fa fas fa-archive" style="position:absolute;left:50px"></i> <span>归档</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-list"></i> 娱乐 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/movies" style="margin-left:75px"><i class="fa fas fa-film" style="position:absolute;left:50px"></i> <span>电影</span></a></li><li><a href="/books" style="margin-left:75px"><i class="fa fas fa-book" style="position:absolute;left:50px"></i> <span>读书</span></a></li><li><a href="/games" style="margin-left:75px"><i class="fa fas fa-gamepad" style="position:absolute;left:50px"></i> <span>游戏</span></a></li><li><a href="/bangumis" style="margin-left:75px"><i class="fa fas fa-film" style="position:absolute;left:50px"></i> <span>番剧</span></a></li></ul></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li class="m-nav-item"><a href="/artitalk" class="waves-effect waves-light"><i class="fa-fw fas fa-comment"></i> 说说</a></li><li><div class="divider"></div></li><li><a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i>Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/10.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">JVM学习</h1></div></div></div></div></div><main class="post-container content"><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/JVM/"><span class="chip bg-color">JVM</span></a></div></div><div class="col s5 right-align"></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2024-03-05</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp; 2024-05-06</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 5.6k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp; 20 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><h1 id="JVM学习"><a href="#JVM学习" class="headerlink" title="JVM学习"></a>JVM学习</h1><ul><li><p>JVM的位置</p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\JVM位置.png"></p></li><li><p>JVM的体系结构</p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\JVM结构图.png"></p></li><li><p>类加载器和<strong>双亲委派机制</strong></p><p>作用：加载 Class 类</p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\类加载器.png"></p><ol><li><p>虚拟机自带的加载器</p></li><li><p>启动类（根）加载器</p></li><li><p>扩展类加载器（Ext）</p></li><li><p>应用程序加载器 （APP）</p></li><li><p>加载器之间的层级关系：</p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\类加载器的层级关系.png"></p></li></ol><ul><li><p>类加载的机制：在 xx.java 文件经过编译后变成 xx.class 文件，类的加载过程就是把 xx.class 文件加载到 JVM 的内存里，当装载 完成后就会得到一个 Class 对象，进而使用 new 来进行对象的实例化。在类记载的过程中需要使用到类加载器，JVM在运行过程中会产生三个具有层级关系的类加载器，每一个类加载器分别作用于不同作用范围的 jar 包</p></li><li><p>双亲委派机制：</p><ol><li>类加载器收到类加载的请求</li><li>将这个请求委托给父类加载器去完成，一直向上层委托，直到最高层启动类加载器</li><li>加载器会检查能否加载当前这个类，能加载就结束，使用当前加载器；若不能，就抛出异常，通知子加载器进行加载</li><li>重复步骤 3、、</li><li></li></ol><p>百度解释：</p><p><strong>双亲委派机</strong>制是Java类加载器中采用的一种类加载策略。该机制的核心思想是：如果一个类加载器收到了类加载请求，默认先将该请求委托给其父类加载器处理。只有当父级加载器无法加载该类时，才会尝试自行加载。</p><p>具体来说，一个类在收到类加载请求后不会尝试自己加载这个类，而是把该类加载请求向上委派给其父类加载器去完成，其父类加载器在接收到该类加载请求后又会将其委派给自己的父类，以此类推，这样所有的类加载请求都被向上委派到启动类加载器中。若父类加载器在接收到类加载请求后发现自己也无法加载该类（通常原因是该类的Class文件在父类的类加载路径中不存在），则父类会将该信息反馈给子类并向下委派子类加载器加载该类，直到该类被成功加载，若找不到该类，则 JVM 会抛出ClassNotFoud异常。</p><p>这种加载方式的优点：</p><ul><li>1、提高安全性，防止加载器所加载的 jar包中的功能类被覆盖</li><li>2、避免重复加载导致的程序混乱</li></ul></li></ul></li><li><p>沙箱安全机制</p></li><li><p>Native本地方法栈</p></li><li><p>方法区：static, final, Class, 常量池~</p></li><li><p>深入理解栈</p><ol><li><p>堆，栈，方法区的 <strong>交互关系</strong></p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\堆栈方法层的关系.png"></p></li></ol></li><li><p>新生区：</p><p>类：诞生，成长甚至消亡的地方</p><p>伊甸园：所有的对象都是在伊甸园区 new出来的</p><p>幸存者区：0区和1区</p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\新生区老年区永久区的示例图.png"></p></li><li><p>养老区：</p><p>从新生区经过轻GC淘汰之后依然存活的数据会进入老年区</p></li><li><p>永久区：<strong>这个区域常驻内存，用来存放自身携带的Class对象。InterFace元数据，存储的是 java运行时的一些环境或类信息，这个区域不存在垃圾回收，关闭VM虚拟机会释放这个区域</strong></p><ul><li>jdk 1.6以前：永久代，常量池在方法区中。</li><li>jdk 1.7 ：永久代，但是慢慢退化了，出现了 <code>去永久代</code> 概念，常量池在堆中。</li><li>jdk1.8以后 ：无永久代，常量池在元空间。</li></ul></li></ul><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\区域模型.png"></p><p>OOM（OutOfMemoryError)：内存满了需要进行调优</p><ul><li>1、尝试扩大堆内存看结果（-Xms1024m -Xmx1024m -XX:+PrintGCDetails）</li><li>2、分析内存，看一下代码那个地方出现了问题（有专业分析工具）</li></ul><p>使用 JPofiler工具分析OOM原因</p><p>-Xms 分配默认初始化内存，默认1/64</p><p>-Xmx 设置最大内存分配，默认1/4</p><p>-XX:+PrintDumpOnOutOfMemoryError</p><p>GC：垃圾回收</p><p>只有在堆和方法区存在，GC共有两种类型，一种是轻GC，一种是重GC（FULL GC）</p><p>GC相关题目：</p><ul><li>JVM的内存模型和分区——详细到每个区是什么？</li><li>堆里面的分区有那些？Eden（伊甸园区），from（幸存者0区），to（幸存者1区），老年区都有哪些特点？</li><li>GC算法有哪些？标记清除法，标记整理，复制算法，引用计数法</li></ul><p><strong>引用计数法</strong></p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\引用计数法.png"></p><p>引用个数为0，就判定为垃圾</p><p><strong>垃圾回收算法：</strong></p><p><strong>复制算法</strong></p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\复制算法.png"></p><ul><li>好处：没有多余的碎片</li><li>坏处：浪费了内存空间，多了一半的 幸存区空间（to）</li></ul><p>复制算法的使用场景：新生对象的存活度较低（一般来说较为适应新生区的内存操作）</p><p><strong>标记清除法</strong></p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\标记清除法.png"></p><ul><li>优点：不需要额外的空间</li><li>缺点：需要多次扫描浪费时间，会产生内存碎片</li></ul><p><strong>标记压缩</strong></p><p><img src="/medias/loading.gif" data-original="D:\JAVA学习\JavaSE\JVM学习\笔记图片\标记压缩.png"></p><p>总结：</p><ol><li>内存效率：复制算法 &gt; 标记消除法 &gt; 标记压缩存储 （时间复杂度）</li><li>内存整齐度：复制算法 = 标记压缩存储 &gt; 标记消除法</li><li>内存利用率：标记压缩存储 = 标记消除法 &gt; 复制算法</li></ol><p>思考：有没有最优的算法？</p><p>答案：没有最优的，只有最合适的，需要根据不同的场景选择最合适的方法！！！</p><p>新生区：</p><ul><li>存活率低</li><li>适合使用复制算法</li></ul><p>老年区：</p><ul><li>区域大：存活率高</li><li>标记清除法（内存碎片不是太多）- 标记压缩 混合实现</li></ul><h1 id="JVM常见面试题"><a href="#JVM常见面试题" class="headerlink" title="JVM常见面试题"></a>JVM常见面试题</h1><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504093517774.png" alt="image-20240504093517774"></p><h2 id="JVM组成"><a href="#JVM组成" class="headerlink" title="JVM组成"></a>JVM组成</h2><h3 id="1、什么是程序计数器？"><a href="#1、什么是程序计数器？" class="headerlink" title="1、什么是程序计数器？"></a>1、什么是程序计数器？</h3><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504103910753.png" alt="image-20240504103910753"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504104218764.png" alt="image-20240504104218764"></p><p>程序计数器是线程私有的（不存在安全问题），每个线程一份，内部保存的是字节码的行号，用于记录正在执行的字节码指令的地址。当多线程工作时，时间片用完后会进行一个记录，之后恢复运行的时候，会根据程序计数器中保存的行号继续向下运行。</p><p>==程序计数器是唯一一个不会出现OOM的内存区域，它的生命周期随着线程的创建而创建，随着线程的结束而死亡。==</p><h3 id="2、详细介绍一下堆？"><a href="#2、详细介绍一下堆？" class="headerlink" title="2、详细介绍一下堆？"></a>2、详细介绍一下堆？</h3><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504110255635.png" alt="image-20240504110255635"></p><p>首先堆是一个 <strong>线程共享</strong>（会存在线程不安全问题）的区域，在虚拟机启动时创建，主要用来存放new出来的对象实例，数组等。</p><p>当堆中没有内存空间可分配给实例，也无法再进行扩展时，则会抛出OOM的异常。</p><p><em><strong>堆中分为年轻代和老年代，分代的唯一理由就是优化GC性能，可以根据各个年代的特点采用最适当的收集算法。</strong></em></p><p><strong>年轻代</strong> 被划分为三个区域。Eden区和两个大小严格相同的Survivor区。根据 JVM的策略，在经历过几次垃圾回收后，仍存活在Survivor区的对象，会被移动到老年代区间。</p><p><strong>老年代</strong> 主要用来保存生命周期长的对象，一般是一些老的对象。</p><p><strong>元空间</strong> 主要用来保存类的信息，静态变量，常量，和编译后的class文件，且元空间使用的是本地内存。</p><p><em>Java7 和 Java8 中，堆的区别是什么？</em></p><ul><li>1.7中有一个永久代，存的是类的信息，静态变量，常量，和编译后的class文件。</li><li>1.8中移除了永久代，把数据存储到本地内存的元空间中，防止内存溢出。</li></ul><hr><h3 id="3、介绍一下方法区？"><a href="#3、介绍一下方法区？" class="headerlink" title="3、介绍一下方法区？"></a>3、介绍一下方法区？</h3><ul><li>方法区是各个线程==共享的内存区域==</li><li>主要用来存储类的信心，运行时常量池</li><li>方法区在虚拟机启动时创建，在关闭时释放</li><li>如果方法区域中的内存无法满足分配请求，则会抛出 <strong>OOM:Metaspace</strong> 异常</li></ul><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504115138905.png" alt="image-20240504115138905"></p><p>元空间在内存不足的情况下报错。</p><hr><h3 id="4、介绍一下运行时常量池？"><a href="#4、介绍一下运行时常量池？" class="headerlink" title="4、介绍一下运行时常量池？"></a>4、介绍一下运行时常量池？</h3><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504115454076.png" alt="image-20240504115454076"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504115549221.png" alt="image-20240504115549221"></p><p>（真实地址就是指的真实的内存地址）</p><hr><h3 id="5、你听说过直接内存吗？"><a href="#5、你听说过直接内存吗？" class="headerlink" title="5、你听说过直接内存吗？"></a>5、你听说过直接内存吗？</h3><ul><li>直接内存并不属于JVM中的内存结构，不由JVM进行管理，是虚拟机的系统内存。</li><li>常用于 <strong>NIO</strong> 操作时，用于数据缓冲区，分配回收成本较高，但是读写性能高，不受 JVM 内存回收管理。</li></ul><hr><h3 id="6、什么是虚拟机栈？"><a href="#6、什么是虚拟机栈？" class="headerlink" title="6、什么是虚拟机栈？"></a>6、什么是虚拟机栈？</h3><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504111735953.png" alt="image-20240504111735953"></p><hr><h3 id="7、堆和栈的区别是什么？"><a href="#7、堆和栈的区别是什么？" class="headerlink" title="7、堆和栈的区别是什么？"></a>7、堆和栈的区别是什么？</h3><ul><li>栈内存用来存放方法调用和局部变量，堆内存用来存放 Java对象或数组。</li><li>堆会进行GC垃圾回收，栈不会（栈帧在弹栈后内存就会释放）。</li><li>栈内存是线程私有的，不会存在线程安全问题。堆内存是共享的，会存在线程安全问题。</li><li>两者的异常错误不同。<ul><li>栈空间不足：java.lang.StackOverFlowError</li><li>堆空间不足：java.lang.OutOfMemoryError</li></ul></li></ul><h2 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h2><h3 id="1、什么是类加载器？类加载器有哪些？"><a href="#1、什么是类加载器？类加载器有哪些？" class="headerlink" title="1、什么是类加载器？类加载器有哪些？"></a>1、什么是类加载器？类加载器有哪些？</h3><p>类加载器的主要作用就是将java类的字节码（ .class文件） 加载到 JVM中（在内存中生成一个代表该类的Class文件），使得java程序能够启动起来。</p><p>JVM中内置了三个重要的 Classloader：</p><ol><li>BootStrapClassLoader（启动类加载器）：处于最顶层的加载器，由C++实现，通常表示为null，他是所有人的爸爸且没有父级，主要用来加载 JDK内部的核心类库（%JAVA_HOME%/lib下的jar包和类）以及被 -Xbootclasspath 参数指定的路径下所有类。</li><li>ExtensionClassLoader（扩展类加载器）：主要负责加载%JAVA_HOME%/lib/ext 目录下的jar包和类，以及被 java.ext.dirs 系统变量所指定的路径下的所有类。</li><li>AppClassLoader（应用程序类加载器）：主要负责加载 classpath 下的所有 jar包和类。</li></ol><p>除了上述的三种类加载器，还有自定义类加载器（CustomClassLoader），自定义类继承ClassLoader，实现自定义的类加载规则。</p><hr><h3 id="2、什么是双亲委派模型？为什么要使用双亲委派机制？"><a href="#2、什么是双亲委派模型？为什么要使用双亲委派机制？" class="headerlink" title="2、什么是双亲委派模型？为什么要使用双亲委派机制？"></a>2、什么是双亲委派模型？为什么要使用双亲委派机制？</h3><p>加载某个类，首先会委托上级类加载器进行加载，若上级也存在上级，则会继续向上委托，如果委托的类加载器没有被加载，则子加载器会尝试加载该类。</p><p>类加载器的父子关系：</p><p>自定义类加载器（最底层） –&gt; App –&gt; Ext –&gt; BootStrap（最高层）</p><p><strong>JVM为什么采用双亲委派机制：</strong></p><ol><li>通过双亲委派机制可以避免某一个类被重复加载，当父类已经加载后，子类就无需加载了，保证类的唯一性。</li><li>保障了安全性，保证 Java的核心API不会被修改</li></ol><p><strong>JVM判断两个java类是否相同的具体规则：</strong></p><p>JVM不仅要看类名是否相同，还要看加载此类的类加载器是否相同。只有两者都相同的情况下，才认为这个两个类是相同的。</p><hr><h3 id="3、如何打破双亲委派机制？"><a href="#3、如何打破双亲委派机制？" class="headerlink" title="3、如何打破双亲委派机制？"></a>3、如何打破双亲委派机制？</h3><p>要想打破双亲委派机制，需要重写 loadClass() 方法。</p><p>首先在类加载器进行类加载的时候，首先会把请求委托给父类去完成（也就是调用父类加载器的 loadClass() 方法来加载类），而我们在重写 loadClass() 方法后，就可以改变传统的双亲委派机制的执行流程。<em>（具体的规则由开发人员自己定义）</em></p><hr><h3 id="4、类加载的执行过程"><a href="#4、类加载的执行过程" class="headerlink" title="4、类加载的执行过程"></a>4、类加载的执行过程</h3><p>类从被加载到虚拟机内存中开始到卸载出内存为止，它的整个生命周期可以简单概括为 7 个阶段：加载（Loading）、验证（Verification）、准备（Preparation）、解析（Resolution）、初始化（Initialization）、使用（Using）和卸载（Unloading）。其中，验证、准备和解析这三个阶段可以统称为连接（Linking）。</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504214106854.png" alt="image-20240504214106854"></p><p><strong>加载</strong>：查找和导入Class文件；</p><ul><li>通过类的全名，获取类的二进制数据流</li><li>解析类的二进制数据流为方法区内的数据结构</li><li>创建 java.lang.Class 类的实例，表示该类型。作为方法区这个类的各种数据的访问入口</li></ul><p><strong>验证</strong>：验证类是否符合 JVM规范，安全性检查；</p><ul><li><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240506103213409.png" alt="image-20240506103213409"></li><li>符号引用验证 Class文件在其常量池会通过字符串记录自己将要使用的类或方法，检查这些类或方法是否存在</li></ul><p><strong>准备</strong>：为类的变量分配内存空间并设置类变量的初始变量；</p><ul><li><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240506103547446.png" alt="image-20240506103547446"></li></ul><p><strong>解析</strong>：把类中的符号引用转变为直接引用；</p><ul><li><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240506103729648.png" alt="image-20240506103729648"></li></ul><p><strong>初始化</strong>：对类的静态变量，静态代码块进行初始化；</p><ul><li><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//1.首次访问这个类的静态变量或静态方法</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Animal<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//2.子类初始化，若父类未被初始化，则优先初始化父类，然后从上到下依次初始化子类</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Cat<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//3.子类访问父类的静态变量，只会触发父类的初始化</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Cat<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal静态代码块..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">boolean</span> sex <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Cat静态代码块...1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Cat静态代码块...2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></li><li><p>==首次访问这个类的静态变量，会初始化静态变量和静态方法块==</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240506104057681.png" alt="image-20240506104057681"></p></li><li><p>==子类初始化，若父类未被初始化，则优先初始化父类静态代码块，然后从上到下依次初始化子类的静态代码块，最后初始化子类属性==</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240506104348423.png" alt="image-20240506104348423"></p></li><li><p>==子类访问父类的静态变量，只会触发父类的初始化，而子类不会初始化==</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240506104057681.png" alt="image-20240506104057681"></p></li></ul><p><strong>使用</strong>：JVM 开始从入口方法开始很自信用户的程序代码；</p><ul><li>调用静态类成员信息（例如：静态字段，静态方法等）</li><li>使用 new关键字为其创建对象实例</li></ul><p><strong>卸载</strong>：用户程序代码执行完毕后，JVM便开始销毁创建的Class文件。</p><p>​	<em><strong>卸载类需要满足的3个要求：</strong></em></p><ol><li><p>该类的所有实例对象都已经被 GC，也就是说堆不存在该类的实例对象。</p></li><li><p>该类没有在其他任何地方被引用</p></li><li><p>该类的类加载器的实例已经被 GC。</p><p>JDK自带的三个类加载器肯定不会被回收，自定义类加载器加载的类可以被卸载掉。</p></li></ol><h2 id="垃圾回收"><a href="#垃圾回收" class="headerlink" title="垃圾回收"></a>垃圾回收</h2><h3 id="1、对象什么时候可以被垃圾器回收？"><a href="#1、对象什么时候可以被垃圾器回收？" class="headerlink" title="1、对象什么时候可以被垃圾器回收？"></a>1、对象什么时候可以被垃圾器回收？</h3><p>如果一个或多个对象没有任何引用指向他，那么这个对象现在就是垃圾，如果定位了垃圾，则有可能会被垃圾回收器回收。</p><p>定位垃圾的两种方式：</p><ul><li>引用计数法：这种方式是给堆内存当中的每个对象记录一个引用个数。对象被引用一次，在当前的对象头上递增一次引用次数，如果这个对象的引用次数为0，代表这个对象可回收。早起JDK使用的方法，引用计数法<em>无法解决循环引用问题导致内存泄漏</em>。</li><li>可达性分析算法：<img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240506110206963.png" alt="image-20240506110206963"></li></ul><h3 id="1-1、那些对象可以作为GC-Root？"><a href="#1-1、那些对象可以作为GC-Root？" class="headerlink" title="1.1、那些对象可以作为GC Root？"></a>1.1、那些对象可以作为GC Root？</h3><ul><li>虚拟机栈（栈帧中的局部变量表）中引用的对象</li><li>本地方法栈中引用的对象</li><li>方法区中类静态属性引用的对象</li><li>方法区中常量引用的对象</li><li>所有被同步锁持有的对象</li><li>JNI（Java Native Interface）引用的对象</li></ul><h3 id="2、JVM垃圾回收算法有哪些？"><a href="#2、JVM垃圾回收算法有哪些？" class="headerlink" title="2、JVM垃圾回收算法有哪些？"></a>2、JVM垃圾回收算法有哪些？</h3><ul><li><strong>标记-清除算法</strong>：垃圾回收分为两个阶段，分别是标记和清除。效率高，但是会产生大量的内存碎片，导致内存不连续；</li><li><strong>复制算法</strong>（适用于年轻代）：为了解决标记清除算法的内存碎片问题，将原有的内存空间一分为二，每次只使用其中的一个，垃圾清除时，会将正在使用的对象复制到另一块内存空间中，让后将该内存空间清除，交换两个内存的角色，完成垃圾的回收。无碎片，但是内存由于每次只使用一半的内存空间，导致内存的使用率较低。</li><li><strong>标记-压缩算法</strong>（适用于老年代）：为了解决复制算法的缺陷，这种算法在标记阶段跟标记清除算法是一样的，但是标记完成之后，不是直接起立垃圾，而是将存活的对象向一端移动，然后清理边界以外的垃圾。无碎片，但是要移动对象，效率就比较低。</li></ul><h3 id="3、说一下JVM中的分代回收"><a href="#3、说一下JVM中的分代回收" class="headerlink" title="3、说一下JVM中的分代回收"></a>3、说一下JVM中的分代回收</h3><p>一、堆的区域划分</p><ol><li>堆内存分为两份，分别是新生代和老年代【1:2】</li><li>对于新生代，内部又分为三个区域，分别是 Eden区，幸存者区Survivor（分成from和to两个区域）【8:1:1】</li></ol><p>二、对象回收分代回收策略</p><ol><li>新创建的对象，都会先存放到 Eden区；</li><li>当Eden区内存满了之后，标记Eden区和from区的存活对象；</li><li>将存活对象复制到to区，之后释放Eden区和from区的内存；</li><li>经过一段时间后，Eden区的内存又出现不足，标记Eden区和to区中存活的对象，将其复制到from区中，再对Eden区和to区释放内存；</li><li>当幸存者区对象熬过几次回收（最多15次），会晋升到老年代（幸存者区内存不足或大对象会提前晋升）</li></ol><h3 id="4、MinorGC，MixedGC，FullGC的区别是什么？"><a href="#4、MinorGC，MixedGC，FullGC的区别是什么？" class="headerlink" title="4、MinorGC，MixedGC，FullGC的区别是什么？"></a>4、MinorGC，MixedGC，FullGC的区别是什么？</h3><ul><li>MinorGC【Young GC】：发生在新生代的垃圾回收，暂停时间短（STW）</li><li>MixedGC：新生代+老年代部分区域的垃圾回收，G1收集器持有。</li><li>FullGC：新生代+老年代完整垃圾回收，暂停时间长（STW），应当尽力避免。</li></ul><p>STW（Stop-The-World）是在垃圾回收算法执⾏过程当中，需要将JVM内存冻结的⼀种状态。在STW 状态下，JAVA的所有线程都是停⽌执⾏的-GC线程除外，native⽅法可以执⾏，但是，不能与JVM交 互。</p><h3 id="5、说一下JVM有哪些垃圾回收器"><a href="#5、说一下JVM有哪些垃圾回收器" class="headerlink" title="5、说一下JVM有哪些垃圾回收器?"></a>5、说一下JVM有哪些垃圾回收器?</h3><p>1、<strong>串行垃圾收集器</strong></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504223132192.png" alt="image-20240504223132192"></p><p>2、<strong>并行垃圾收集器</strong>，==JDK8默认采用并行垃圾回收器==</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504223230157.png" alt="image-20240504223230157"></p><p>3、<strong>CMS（并发）垃圾收集器</strong>，主要作用于老年代</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504223335964.png" alt="image-20240504223335964"></p><p>4、<strong>G1 垃圾收集器（重点）</strong></p><ul><li>应用于新生代和老年代，在JDK9之后默认垃圾回收器为G1</li><li>划分成多个区域，每个区域都可以充当 Eden，survivior，old， humongous。其中humongous专门为大对象准备。</li><li>采用了==复制算法==</li><li>兼顾响应时间和吞吐量</li><li>分成三个阶段：新生代回收（STW），<em>并发</em>标记（重新标记STW），混合收集</li><li>如果并发失败（即回收的速度赶不上创建新对象的速度），会触发Full GC。</li></ul><h3 id="6、强引用，软引用，弱引用，虚引用的区别"><a href="#6、强引用，软引用，弱引用，虚引用的区别" class="headerlink" title="6、强引用，软引用，弱引用，虚引用的区别"></a>6、强引用，软引用，弱引用，虚引用的区别</h3><ul><li>强引用：只要所有 GC Root 能找到，就不会被回收；</li><li>软引用：需要配合 SoftReference 使用，当垃圾多次回收，内存依旧不够的情况下，会回收软引用对象；</li><li>弱引用：需要配合 WeakReference 使用，只要进行了垃圾回收，就会把弱引用对象回收；</li><li>虚引用：必须配合引用队列使用，被引用对象回收时，会将虚引用入队，由 Reference Handler 线程调用虚引用相关方法并直接释放内存。</li></ul><h3 id="7、内存分配和回收原则"><a href="#7、内存分配和回收原则" class="headerlink" title="7、内存分配和回收原则"></a>7、内存分配和回收原则</h3><ol><li><p><strong>对象优先分配在Eden区</strong></p><p>通常来说对象会优先分配到Eden区，当Eden区没有足够的空间进行分配的时候，会触发一次Minor GC，在GC期间若发现Eden区和幸存者区的内存都不够分配时，会通过 <strong>分配担保机制</strong> 将这些对象放入老年代，老年代有足够的空间容纳这些对象，从而可以避免Full GC。</p><p>分配担保机制是为了确保在进行MinorGC之前，老年代本身还有容纳新生代所有对象的剩余空间。</p></li><li><p><strong>大对象直接进入老年代</strong></p><p>所谓大对象就是需要大量连续存储空间的对象（例如字符串，数组等）</p><p>大对象直接进入老年代是由虚拟机动态决定的，这是一种优化策略，旨在避免将大对象放入新生代而造成频繁的垃圾回收。</p><ul><li><code>-XX:G1HeapRegionSize</code> 可以设置堆区域大小</li><li><code>-XX:G1MixedGCLiveThresholdPercent</code> 可以设置阈值，决定哪些对象直接进入老年代</li></ul></li><li><p><strong>长期存活的对象进入老年代</strong></p><p>对象在Eden区（Age=0）经过首次MinorGC后存活，并且转移到幸存者区这时它的 Age=1，往后每经历过一次MinorGC，年龄+1，当对象的 Age &gt; 15 时，就会被晋升到老年代</p><ul><li><code>-XX:MaxTenuringThreshold</code> 可以设置这个阈值。（CMS垃圾回收器它的默认值是6）</li></ul></li></ol><h2 id="JVM实践"><a href="#JVM实践" class="headerlink" title="JVM实践"></a>JVM实践</h2><h3 id="1、JVM调优参数可以在哪里设置参数值？"><a href="#1、JVM调优参数可以在哪里设置参数值？" class="headerlink" title="1、JVM调优参数可以在哪里设置参数值？"></a>1、JVM调优参数可以在哪里设置参数值？</h3><ul><li><p>war包部署在Tomcat中设置</p><p>修改 TOMCAT_HOME/bin/catalina.sh 文件</p></li><li><p>jar包部署在启动参数设置</p><p>java -Xm512m -Xmx1024m -jar xxxx.jar</p></li></ul><h3 id="2、JVM调优参数有那些？"><a href="#2、JVM调优参数有那些？" class="headerlink" title="2、JVM调优参数有那些？"></a>2、JVM调优参数有那些？</h3><ol><li>标注指令：- 开头，这些指令是所有的HotSpot都支持的参数，可以用java -help打印出来</li><li>非标注指令：-X 开头，这些指令通常是跟特定的HotSpot版本对应的。可以⽤java -X 打印出来。</li><li>不稳定参数：-XX 开头，这⼀类参数是跟特定HotSpot版本对应的，并且变化⾮常⼤。</li></ol><ul><li><p><strong>设置堆空间大小</strong></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240504231130069.png" alt="image-20240504231130069"></p></li><li><p><strong>虚拟机栈的设置</strong></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505102620784.png" alt="image-20240505102620784"></p></li><li><p>年轻代中Eden区和两个Survivor区的大小比例</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505102959711.png" alt="image-20240505102959711"></p></li><li><p>设置垃圾回收收集器</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505103042902.png" alt="image-20240505103042902"></p></li></ul><h3 id="3、说一下JVM的调优工具"><a href="#3、说一下JVM的调优工具" class="headerlink" title="3、说一下JVM的调优工具"></a>3、说一下JVM的调优工具</h3><p>(1) 命令工具包括：<strong>jps</strong>, <strong>jstack</strong>, <strong>jmap</strong>, <strong>jhat</strong>, <strong>jstat</strong></p><p>(2) 可视化工具包括：<strong>jconsole</strong>, <strong>VisualVM</strong></p><ul><li><p>命令工具</p><ul><li><p><strong>jps 进程状态信息</strong></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505103955505.png" alt="image-20240505103955505"></p></li><li><p><strong>jstack+进程id</strong> 查看Java进程内线程的堆栈信息</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505104157769.png" alt="image-20240505104157769"></p></li><li><p><strong>jmap 查看堆栈信息</strong></p><ul><li>jmap -heap 线程号</li><li>jmap -dump:format=b,file=D:/JAVA学习/JavaSE/JVM学习/hprof/aabbcc.hprof 4516</li></ul></li><li><p><strong>jhat 堆存储快照分析工具</strong>，用于分析 heapdump 文件，它会建立一个 HTTP/HTML 服务器，让用户可以在浏览器上查看分析结果。</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505105506303.png" alt="image-20240505105506303"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505105543241.png" alt="image-20240505105543241"></p></li><li><p><strong>jstat JVM统计检测工具</strong></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505105122621.png" alt="image-20240505105122621"></p></li></ul></li><li><p>可视化工具</p><ul><li><p>jconsole 用于对 JVM的内存，线程，类的监控</p><p>打开C:\Program Files\Java\jdk1.8.0_311\bin下的 jconsole.exe，选择要查看的进程。</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505110027505.png" alt="image-20240505110027505"></p></li><li><p>VisualVM 能够监控线程，内存的情况</p><p>打开C:\Program Files\Java\jdk1.8.0_311\bin文件下的 jvisualvm.exe，选择进程查看。</p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505110313937.png" alt="image-20240505110313937"></p></li></ul></li></ul><h3 id="4、JVM如何查看内存泄漏的问题？"><a href="#4、JVM如何查看内存泄漏的问题？" class="headerlink" title="4、JVM如何查看内存泄漏的问题？"></a>4、JVM如何查看内存泄漏的问题？</h3><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505111857795.png" alt="image-20240505111857795"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505110631351.png" alt="image-20240505110631351"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505110746634.png" alt="image-20240505110746634"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505110845873.png" alt="image-20240505110845873"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505111741565.png" alt="image-20240505111741565"></p><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505111805425.png" alt="image-20240505111805425"><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505111823368.png" alt="image-20240505111823368"></p><h3 id="5、CPU飙高排查方案与思路"><a href="#5、CPU飙高排查方案与思路" class="headerlink" title="5、CPU飙高排查方案与思路"></a>5、CPU飙高排查方案与思路</h3><p><img src="/medias/loading.gif" data-original="C:\Users\Bumble\AppData\Roaming\Typora\typora-user-images\image-20240505112236926.png" alt="image-20240505112236926"></p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者: </i></span><span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">Sakura</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接: </i></span><span class="reprint-info"><a href="https://anohimono.github.io/2024/03052.html">https://anohimono.github.io/2024/03052.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明: </i></span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">Sakura</a> !</span></div></div><script async defer>function navToReprintStatement(){$("html, body").animate({scrollTop:$("#reprint-statement").offset().top-80},800)}document.addEventListener("copy",function(t){M.toast({html:'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>'})})</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/JVM/"><span class="chip bg-color">JVM</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/libs/share/js/social-share.min.js"></script></div></div></div><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">多谢大佬赏识，您的鼓励就是我最大的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/medias/loading.gif" data-original="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/medias/loading.gif" data-original="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.valine-card{margin:1.5rem auto}.valine-card .card-content{padding:20px 20px 5px 20px}#vcomments textarea{box-sizing:border-box;background:url(/medias/comment_bg.png) 100% 100% no-repeat}#vcomments p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#vcomments blockquote p{text-indent:.2rem}#vcomments a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#vcomments img{max-width:100%;height:auto;cursor:pointer}#vcomments ol li{list-style-type:decimal}#vcomments ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#vcomments ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#vcomments ul li{list-style-type:disc}#vcomments ul ul li{list-style-type:circle}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#vcomments table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#vcomments h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#vcomments h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#vcomments h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#vcomments h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#vcomments h6{font-size:1rem;line-height:1.3rem}#vcomments p{font-size:1rem;line-height:1.5rem}#vcomments hr{margin:12px 0;border:0;border-top:1px solid #ccc}#vcomments blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#vcomments pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#vcomments code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#vcomments pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#vcomments pre[class*=language-]{padding:1.2em;margin:.5em 0}#vcomments code[class*=language-],pre[class*=language-]{color:#e8eaf6}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#vcomments b,strong{font-weight:700}#vcomments dfn{font-style:italic}#vcomments small{font-size:85%}#vcomments cite{font-style:normal}#vcomments mark{background-color:#fcf8e3;padding:.2em}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card valine-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="vcomments" class="card-content" style="display:grid"></div></div><script src="/libs/valine/av-min.js"></script><script src="https://unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"xa0Evip1UUNJ5XlYzrmZ5XUC-gzGzoHsz",appKey:"PBzrO9XlhlgX9OjRKHixgZM5",notify:!1,verify:!1,visitor:!0,avatar:"mp",pageSize:"10",lang:"zh-cn",placeholder:"ヾﾉ≧∀≦)o 来呀！快活呀！~",enableQQ:!0,emojiCDN:"//i0.hdslb.com/bfs/emote/",emojiMaps:{tv_doge:"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv_打脸":"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png","tv_抓狂":"fe31c08edad661d63762b04e17b8d5ae3c71a757.png","tv_抠鼻":"c666f55e88d471e51bbd9fab9bb308110824a6eb.png","tv_斜眼笑":"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png","tv_无奈":"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png","tv_晕":"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png","tv_流汗":"cead1c351ab8d79e9f369605beb90148db0fbed3.png","tv_流泪":"7e71cde7858f0cd50d74b0264aa26db612a8a167.png","tv_流鼻血":"c32d39db2737f89b904ca32700d140a9241b0767.png","tv_点赞":"f85c354995bd99e28fc76c869bfe42ba6438eff4.png","tv_生气":"26702dcafdab5e8225b43ffd23c94ac1ff932654.png","tv_生病":"8b0ec90e6b86771092a498c54f09fc94621c1900.png","tv_疑问":"0793d949b18d7be716078349c202c15ff166f314.png","tv_白眼":"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png","tv_皱眉":"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png","tv_目瞪口呆":"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png","tv_睡着":"8b196675b53af58264f383c50ad0945048290b33.png","tv_笑哭":"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png","tv_腼腆":"89712c0d4af73e67f89e35cbc518420380a7f6f4.png","tv_色":"61822c7e9aae5da76475e7892534545336b23a6f.png","tv_调侃":"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png","tv_调皮":"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png","tv_鄙视":"6e72339f346a692a495b123174b49e4e8e781303.png","tv_闭嘴":"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png","tv_难过":"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png","tv_馋":"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png","tv_鬼脸":"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png","tv_黑人问号":"45821a01f51bc867da9edbaa2e070410819a95b2.png","tv_鼓掌":"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"},requiredFields:["nick","mail"]})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/2024/030649867.html"><div class="card-image"><img src="/medias/loading.gif" data-original="/medias/featureimages/1.jpg" class="responsive-img" alt="JWT实现登录验证"> <span class="card-title">JWT实现登录验证</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2024-03-06 </span><span class="publish-author"><i class="fas fa-user fa-fw"></i> Sakura</span></div></div><div class="card-action article-tags"><a href="/tags/JWT/"><span class="chip bg-color">JWT</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/2024/02069977.html"><div class="card-image"><img src="/medias/loading.gif" data-original="/medias/featureimages/9.jpg" class="responsive-img" alt="MySQL"> <span class="card-title">MySQL</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2024-02-06 </span><span class="publish-author"><i class="fas fa-user fa-fw"></i> Sakura</span></div></div><div class="card-action article-tags"><a href="/tags/MySQL/"><span class="chip bg-color">MySQL</span></a></div></div></div></div></article></div><script>$("#articleContent").on("copy",function(e){var n,t,o,i;void 0===window.getSelection||(""+(n=window.getSelection())).length<Number.parseInt("120")||(t=document.getElementsByTagName("body")[0],(o=document.createElement("div")).style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"!==n.getRangeAt(0).commonAncestorContainer.nodeName&&"CODE"!==n.getRangeAt(0).commonAncestorContainer.nodeName||(o.innerHTML="<pre>"+o.innerHTML+"</pre>"),i=document.location.href,o.innerHTML+='<br />来源: 十二の博客宇宙<br />文章作者: Sakura<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归作者所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout(function(){t.removeChild(o)},200))})</script><script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>$(function(){tocbot.init({tocSelector:"#toc-content",contentSelector:"#articleContent",headingsOffset:-(.4*$(window).height()-45),collapseDepth:Number("0"),headingSelector:"h2, h3, h4"});let t=parseInt(.4*$(window).height()-64),e=$(".toc-widget");$(window).scroll(function(){$(window).scrollTop()>t?e.addClass("toc-fixed"):e.removeClass("toc-fixed")});const n="expanded";let i=$("#toc-aside"),l=$("#main-content");$("#floating-toc-btn .btn-floating").click(function(){i.hasClass(n)?(i.removeClass(n).hide(),l.removeClass("l9")):(i.addClass(n).show(),l.addClass("l9"));var e="artDetail",o="prenext-posts";if(0!==(e=$("#"+e)).length){let t=e.width();450<=t?t+=21:350<=t&&t<450?t+=18:300<=t&&t<350?t+=16:t+=14,$("#"+o).width(t)}})})</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2022-2024</span> <a href="/about" target="_blank">Sakura</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">141.6k</span> <span id="busuanzi_container_site_pv">&nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp; <span id="busuanzi_value_site_pv" class="white-color"></span> </span><span id="busuanzi_container_site_uv">&nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp; <span id="busuanzi_value_site_uv" class="white-color"></span></span><br><span id="sitetime">Loading ...</span><script>var calcSiteTime=function(){var e=new Date,t="2022",n=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),r=e.getHours(),o=e.getMinutes(),e=e.getSeconds(),s=Date.UTC(t,"11","20","12","8","46"),i=Date.UTC(n,i,a,r,o,e)-s,a=Math.floor(i/31536e6),r=Math.floor(i/864e5-365*a);t===String(n)?(document.getElementById("year").innerHTML=n,o="This site has been running for "+r+" days",o="本站已运行 "+r+" 天",document.getElementById("sitetime").innerHTML=o):(document.getElementById("year").innerHTML=t+" - "+n,e="This site has been running for "+a+" years and "+r+" days",e="本站已运行 "+a+" 年 "+r+" 天",document.getElementById("sitetime").innerHTML=e)};calcSiteTime()</script><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/Anohimono" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:2872508031@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2872508031" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2872508031" data-position="top" data-delay="50"><i class="fab fa-qq"></i> </a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$(function(){!function(t,r,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),t=document.getElementById(r),n=document.getElementById(s);t.addEventListener("input",function(){var o='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var n,e,r,s=!0,i=t.title.trim().toLowerCase(),l=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),a=0===(a=t.url).indexOf("/")?t.url:"/"+a,c=-1,u=-1;""!==i&&""!==l&&h.forEach(function(t,e){n=i.indexOf(t),c=l.indexOf(t),n<0&&c<0?s=!1:(c<0&&(c=0),0===e&&(u=c))}),s&&(o+="<li><a href='"+a+"' class='search-result-title'>"+i+"</a>",a=t.content.trim().replace(/<[^>]+>/g,""),0<=u&&(t=u+80,(t=0===(e=(e=u-20)<0?0:e)?100:t)>a.length&&(t=a.length),r=a.substr(e,t),h.forEach(function(t){var e=new RegExp(t,"gi");r=r.replace(e,'<em class="search-keyword">'+t+"</em>")}),o+='<p class="search-result">'+r+"...</p>"),o+="</li>")}),o+="</ul>",n.innerHTML=o)})}})}("/search.xml","searchInput","searchResult")})</script><div class="stars-con"><div id="stars"></div><div id="stars2"></div><div id="stars3"></div></div><script>function switchNightMode(){$('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($("body")),setTimeout(function(){$("body").hasClass("DarkMode")?($("body").removeClass("DarkMode"),localStorage.setItem("isDark","0"),$("#sum-moon-icon").removeClass("fa-sun").addClass("fa-moon")):($("body").addClass("DarkMode"),localStorage.setItem("isDark","1"),$("#sum-moon-icon").addClass("fa-sun").removeClass("fa-moon")),setTimeout(function(){$(".Cuteen_DarkSky").fadeOut(1e3,function(){$(this).remove()})},2e3)})}</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script type="text/javascript" src="/js/fireworks.js"></script><script src="https://ssl.captcha.qq.com/TCaptcha.js"></script><script src="/libs/others/TencentCaptcha.js"></script><button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0],e=(t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(t,e)}()</script><script async src="/libs/others/busuanzi.pure.mini.js"></script><script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async></script><script src="/libs/instantpage/instantpage.js" type="module"></script><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a=c[o],i=function(){c=c.filter(function(t){return a!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(a)};(t=a).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),i()):(e=new Image,n=t.getAttribute("data-original"),e.onload=function(){t.src=n,t.removeAttribute("data-original"),i()},t.src!==n&&(e.src=n))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"right",width:145,height:315},mobile:{show:!0,scale:.5},react:{opacityDefault:.7,opacityOnHover:.8},log:!1})</script></body></html>
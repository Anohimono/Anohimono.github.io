<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>为使用matery主题的Hexo增加Valine评论系统</title>
      <link href="/2022/1122129.html"/>
      <url>/2022/1122129.html</url>
      
        <content type="html"><![CDATA[<h2 id="为使用matery主题的Hexo增加Valine评论系统"><a href="#为使用matery主题的Hexo增加Valine评论系统" class="headerlink" title="为使用matery主题的Hexo增加Valine评论系统"></a>为使用matery主题的Hexo增加Valine评论系统</h2><h3 id="1、序言"><a href="#1、序言" class="headerlink" title="1、序言"></a>1、序言</h3><p>上篇博客讲述了如何对hexo+<a href="https://so.csdn.net/so/search?q=GitHub&amp;spm=1001.2101.3001.7020">GitHub</a>的博客系统进行一些配置，由于配置评论系统较为复杂，故单独写本篇博客来记录如何为使用matery主题的hexo博客系统增加评论系统</p><h3 id="2、环境准备"><a href="#2、环境准备" class="headerlink" title="2、环境准备"></a>2、环境准备</h3><p>由于本站博客系统使用的是<a href="https://console.leancloud.cn/">LeanCloud</a>提供的，因此先打开官网进行<a href="https://leancloud.cn/dashboard/login.html#/signup">注册</a>。</p><p>注册完成后直接选择创建应用，应用名称随便填，方案选择开发版，点击创建即可。</p><p><img src="C:\Users\Bumble\Pictures\笔记图片\增加评论.png"></p><p>注册完成之后我们需要用到AppID和AppKey。</p><p>AppID：87PeWo5WK3a6zYXS8wsgJIrZ-gzGzoHsz</p><p>AppKey：b7YpfAvFY5TZqvNLrkQQ8PLu</p><h3 id="3、配置评论内容"><a href="#3、配置评论内容" class="headerlink" title="3、配置评论内容"></a>3、配置评论内容</h3><p>在matery主题的配置文件<code>_config.yml</code>中，创建Valine属性：</p><pre class=" language-yml"><code class="language-yml"># Valine 评论模块的配置，默认为不激活，如要使用，就请激活该配置项，并设置 appId 和 appKey.valine:  enable: true   appId: 你的AppID  appKey: 你的AppKey  pageSize: 10                # 每页显示条数  avatar: monsterid           # 默认头像  lang: zh-CN   placeholder: 昵称填写qq可以显示qq头像和昵称哦~   # 提示信息  guest_info: nick,mail,link   recordIP: true   serverURLs: ''   background: /medias/comment_bg.png               # 背景图片  count: true </code></pre><h3 id="4、更换Valine的版本"><a href="#4、更换Valine的版本" class="headerlink" title="4、更换Valine的版本"></a>4、更换Valine的版本</h3><p>在matery配置页面，找到libs.js.valine，将其设置为 <strong>valine: <a href="https://unpkg.com/valine/dist/Valine.min.js">https://unpkg.com/valine/dist/Valine.min.js</a></strong></p><p><img src="C:\Users\Bumble\Pictures\笔记图片\增加评论2.png"></p><h3 id="5、更换表情"><a href="#5、更换表情" class="headerlink" title="5、更换表情"></a>5、更换表情</h3><p>打开<code>themes\matery\layout\_partial</code>中找到<code>valine.ejs</code>，找到其中的<code>new Valine</code>，大概在249行，修改为以下内容：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Valine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">'#vcomments'</span><span class="token punctuation">,</span>        appId<span class="token punctuation">:</span> <span class="token string">'&lt;%- theme.valine.appId %>'</span><span class="token punctuation">,</span>        appKey<span class="token punctuation">:</span> <span class="token string">'&lt;%- theme.valine.appKey %>'</span><span class="token punctuation">,</span>        notify<span class="token punctuation">:</span> <span class="token string">'&lt;%- theme.valine.notify %>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>        verify<span class="token punctuation">:</span> <span class="token string">'&lt;%- theme.valine.verify %>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>        visitor<span class="token punctuation">:</span> <span class="token string">'&lt;%- theme.valine.visitor %>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>        avatar<span class="token punctuation">:</span> <span class="token string">'&lt;%- theme.valine.avatar %>'</span><span class="token punctuation">,</span>        pageSize<span class="token punctuation">:</span> <span class="token string">'&lt;%- theme.valine.pageSize %>'</span><span class="token punctuation">,</span>        lang<span class="token punctuation">:</span> <span class="token string">'&lt;% if (config.language == "zh-CN") {  %>zh-cn&lt;% } else { %>en&lt;% } %>'</span><span class="token punctuation">,</span>        placeholder<span class="token punctuation">:</span> <span class="token string">'&lt;%= theme.valine.placeholder %>'</span><span class="token punctuation">,</span>        enableQQ<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        emojiCDN<span class="token punctuation">:</span> <span class="token string">'//i0.hdslb.com/bfs/emote/'</span><span class="token punctuation">,</span>         <span class="token comment" spellcheck="true">// 表情title和图片映射</span>        emojiMaps<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token string">"tv_doge"</span><span class="token punctuation">:</span> <span class="token string">"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_亲亲"</span><span class="token punctuation">:</span> <span class="token string">"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_偷笑"</span><span class="token punctuation">:</span> <span class="token string">"bb690d4107620f1c15cff29509db529a73aee261.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_再见"</span><span class="token punctuation">:</span> <span class="token string">"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_冷漠"</span><span class="token punctuation">:</span> <span class="token string">"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_发怒"</span><span class="token punctuation">:</span> <span class="token string">"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_发财"</span><span class="token punctuation">:</span> <span class="token string">"34db290afd2963723c6eb3c4560667db7253a21a.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_可爱"</span><span class="token punctuation">:</span> <span class="token string">"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_吐血"</span><span class="token punctuation">:</span> <span class="token string">"09dd16a7aa59b77baa1155d47484409624470c77.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_呆"</span><span class="token punctuation">:</span> <span class="token string">"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_呕吐"</span><span class="token punctuation">:</span> <span class="token string">"9f996894a39e282ccf5e66856af49483f81870f3.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_困"</span><span class="token punctuation">:</span> <span class="token string">"241ee304e44c0af029adceb294399391e4737ef2.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_坏笑"</span><span class="token punctuation">:</span> <span class="token string">"1f0b87f731a671079842116e0991c91c2c88645a.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_大佬"</span><span class="token punctuation">:</span> <span class="token string">"093c1e2c490161aca397afc45573c877cdead616.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_大哭"</span><span class="token punctuation">:</span> <span class="token string">"23269aeb35f99daee28dda129676f6e9ea87934f.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_委屈"</span><span class="token punctuation">:</span> <span class="token string">"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_害羞"</span><span class="token punctuation">:</span> <span class="token string">"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_尴尬"</span><span class="token punctuation">:</span> <span class="token string">"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_微笑"</span><span class="token punctuation">:</span> <span class="token string">"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_思考"</span><span class="token punctuation">:</span> <span class="token string">"90cf159733e558137ed20aa04d09964436f618a1.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_惊吓"</span><span class="token punctuation">:</span> <span class="token string">"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_打脸"</span><span class="token punctuation">:</span> <span class="token string">"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_抓狂"</span><span class="token punctuation">:</span> <span class="token string">"fe31c08edad661d63762b04e17b8d5ae3c71a757.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_抠鼻"</span><span class="token punctuation">:</span> <span class="token string">"c666f55e88d471e51bbd9fab9bb308110824a6eb.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_斜眼笑"</span><span class="token punctuation">:</span> <span class="token string">"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_无奈"</span><span class="token punctuation">:</span> <span class="token string">"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_晕"</span><span class="token punctuation">:</span> <span class="token string">"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_流汗"</span><span class="token punctuation">:</span> <span class="token string">"cead1c351ab8d79e9f369605beb90148db0fbed3.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_流泪"</span><span class="token punctuation">:</span> <span class="token string">"7e71cde7858f0cd50d74b0264aa26db612a8a167.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_流鼻血"</span><span class="token punctuation">:</span> <span class="token string">"c32d39db2737f89b904ca32700d140a9241b0767.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_点赞"</span><span class="token punctuation">:</span> <span class="token string">"f85c354995bd99e28fc76c869bfe42ba6438eff4.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_生气"</span><span class="token punctuation">:</span> <span class="token string">"26702dcafdab5e8225b43ffd23c94ac1ff932654.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_生病"</span><span class="token punctuation">:</span> <span class="token string">"8b0ec90e6b86771092a498c54f09fc94621c1900.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_疑问"</span><span class="token punctuation">:</span> <span class="token string">"0793d949b18d7be716078349c202c15ff166f314.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_白眼"</span><span class="token punctuation">:</span> <span class="token string">"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_皱眉"</span><span class="token punctuation">:</span> <span class="token string">"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_目瞪口呆"</span><span class="token punctuation">:</span> <span class="token string">"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_睡着"</span><span class="token punctuation">:</span> <span class="token string">"8b196675b53af58264f383c50ad0945048290b33.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_笑哭"</span><span class="token punctuation">:</span> <span class="token string">"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_腼腆"</span><span class="token punctuation">:</span> <span class="token string">"89712c0d4af73e67f89e35cbc518420380a7f6f4.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_色"</span><span class="token punctuation">:</span> <span class="token string">"61822c7e9aae5da76475e7892534545336b23a6f.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_调侃"</span><span class="token punctuation">:</span> <span class="token string">"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_调皮"</span><span class="token punctuation">:</span> <span class="token string">"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_鄙视"</span><span class="token punctuation">:</span> <span class="token string">"6e72339f346a692a495b123174b49e4e8e781303.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_闭嘴"</span><span class="token punctuation">:</span> <span class="token string">"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_难过"</span><span class="token punctuation">:</span> <span class="token string">"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_馋"</span><span class="token punctuation">:</span> <span class="token string">"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_鬼脸"</span><span class="token punctuation">:</span> <span class="token string">"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_黑人问号"</span><span class="token punctuation">:</span> <span class="token string">"45821a01f51bc867da9edbaa2e070410819a95b2.png"</span><span class="token punctuation">,</span>        <span class="token string">"tv_鼓掌"</span><span class="token punctuation">:</span> <span class="token string">"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        requiredFields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'nick'</span><span class="token punctuation">,</span><span class="token string">'mail'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//设置必填项</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="C:\Users\Bumble\Pictures\笔记图片\评论表情添加.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BeautifulSoup4库</title>
      <link href="/2022/112233072.html"/>
      <url>/2022/112233072.html</url>
      
        <content type="html"><![CDATA[<h2 id="BeautifulSoup4库"><a href="#BeautifulSoup4库" class="headerlink" title="BeautifulSoup4库"></a><strong>BeautifulSoup4库</strong></h2><h3 id="1-数据解析工具对比"><a href="#1-数据解析工具对比" class="headerlink" title="1.数据解析工具对比"></a>1.数据解析工具对比</h3><table><thead><tr><th align="left">解析工具</th><th align="left">解析速度</th><th align="left">使用难度</th></tr></thead><tbody><tr><td align="left">BeautifulSoup4</td><td align="left">最慢</td><td align="left">最简单</td></tr><tr><td align="left">lxml</td><td align="left">快</td><td align="left">简单</td></tr><tr><td align="left">正则表达式</td><td align="left">最快</td><td align="left">最难</td></tr></tbody></table><h3 id="2-简单使用"><a href="#2-简单使用" class="headerlink" title="2.简单使用"></a>2.简单使用</h3><pre class=" language-Python"><code class="language-Python">from bs4 import BeautifulSoupfile = open("./肖申克的救赎.html", "rb")html = file.read().decode("utf-8")bs = BeautifulSoup(html, "html.parser")soup = BeautifulSoup(html, "lxml")# 1.获取所有span标签for item in soup.find_all("span"):    print(item)    # 2.获取第2个span标签for item in soup.find_all("span", limit=2)[1]:  # limit=x，其中‘x’等于几就能获取几个标签。    print(item)    # 3. 获取所有class为title的span标签for item in soup.find_all('span', class_="title"):    print(item)    # 4.获取a标签里的href属性aList = soup.find_all("a")for a in aList:    # 1.通过下表的方法搜索    href = a['href']    print(href)    # 2.通过attrs属性的方法    href2 = a.attrs['href']    print(href2)    # 5.获取纯文本spans = soup.find_all("span")for span in spans:    print(span.string)</code></pre><h3 id="3-string-和-stripped-strings"><a href="#3-string-和-stripped-strings" class="headerlink" title="3.string 和 stripped_strings"></a>3.string 和 stripped_strings</h3><p>string获取到的字符会包含有空白格，而stripped_strings获取到的字符是所有非空的字符串，代码示例如下：</p><pre class=" language-Python"><code class="language-Python">spans = soup.find_all('div', class_="hd")for span in spans:    sp = list(span.strings)    print(sp)    ['\n', '\n', '肖申克的救赎', '\n', '\xa0/\xa0The Shawshank Redemption', '\n','\xa0/\xa0月黑高飞(港)  /  刺激1995(台)', '\n', '\n', '[可播放]', '\n']        spn = list(span.stripped_strings)    print(spn)    ['肖申克的救赎', '/\xa0The Shawshank Redemption', '/\xa0月黑高飞(港)  /  刺激1995(台)', '[可播放]']</code></pre><h3 id="4-find-all的使用"><a href="#4-find-all的使用" class="headerlink" title="4.find_all的使用"></a>4.find_all的使用</h3><p>1.在提取标签时，第一个参数是标签的名字，如果在提取标签时要使用标签的属性进行过滤，那么可以在这个方法中通过关键字参数的形式，将属性的名字以及对应的值传进去</p><p>2.在提取限量的标签时，可用limit参数限制所要提取的标签个数</p><h3 id="5-find与find-all的区别"><a href="#5-find与find-all的区别" class="headerlink" title="5.find与find_all的区别"></a>5.find与find_all的区别</h3><p>1.find：只能找到第一个满足条件的标签</p><p>2.find_all：会返回所有满足条件的标签</p><h3 id="6-使用find与find-all的过渡条件"><a href="#6-使用find与find-all的过渡条件" class="headerlink" title="6.使用find与find_all的过渡条件"></a>6.使用find与find_all的过渡条件</h3><p>1.关键字参数，将属性的名字作为关键字参数的名字，以及属性的值作为关键字参数值的过滤条件进行过滤</p><p>2.attrs参数，将属性条件放到一个字典中，传给attrs参数</p><h3 id="7-css选择器"><a href="#7-css选择器" class="headerlink" title="7.css选择器"></a>7.css选择器</h3><p>1.根据标签的名字选择，示例代码如下：</p><pre class=" language-css"><code class="language-css"><span class="token selector">p</span><span class="token punctuation">{</span>    <span class="token property">background-color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2.根据类名选择，要在类的前面加一个点，示例代码如下;</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token class">.line</span></span><span class="token punctuation">{</span>    <span class="token property">background-color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>3.根据id名字选择，需要在id前加一个#，示例代码如下：</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token id">#box</span></span><span class="token punctuation">{</span>    <span class="token property">background-color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>4.查找子孙元素，需要在子孙元素前留一个空格，示例代码如下：</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token id">#box</span> p</span><span class="token punctuation">{</span>    <span class="token property">background-color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>5.查找直接子元素，要在父子元素中间插入一个 &gt; ，示例代码如下：</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token id">#box</span> > p</span><span class="token punctuation">{</span>    <span class="token property">background-color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>6.根据属性名查找，应县写标签名字，然后在中括号里写属性的值，示例代码如下：</p><pre class=" language-css"><code class="language-css"><span class="token selector">input<span class="token attribute">[name='username']</span></span><span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>7.在根据类名或者id进行查找的时候，如果还要根据标签名进行过滤，那么可以在类的前面或者id前面加上标签的名字，示例代码如下：</p><pre class=" language-css"><code class="language-css"><span class="token selector">div<span class="token id">#line</span></span><span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">div<span class="token class">.line</span></span><span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>BeautifulSoup中使用css选择器</strong><br>在BeautifulSoup中使用css选择器是，需要使用<code>soup.select()</code>传递一个css选择器的字符串给select函数</p>]]></content>
      
      
      
        <tags>
            
            <tag> python网络爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
